<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Naver App 실행</title>
</head>
<body>
    <h1>잠시만 기다려 주세요...</h1>
    <p>네이버 앱이 실행 중입니다. 앱이 설치되지 않았다면 설치 페이지로 이동합니다.</p>

    <script>
        // Naver App Custom URL Scheme 및 스토어 링크 정의
        const NAVER_SCHEME = "naversearchapp://inappbrowser?url=https%3A%2F%2Fwww.naver.com&target=new&version=6";
        const ANDROID_INTENT_SCHEME = `
            intent://inappbrowser?url=https%3A%2F%2Fwww.naver.com&target=new&version=6#Intent;
            scheme=naversearchapp;
            action=android.intent.action.VIEW;
            category=android.intent.category.BROWSABLE;
            package=com.nhn.android.search;
            end;
        `;
        const NAVER_STORE_IOS = "https://apps.apple.com/kr/app/id393499958";
        const NAVER_STORE_ANDROID = "https://play.google.com/store/apps/details?id=com.nhn.android.search";

        /**
         * 기기의 운영 체제를 판별
         * @returns {"android"|"ios"|"other"}
         */
        function detectOS() {
            const userAgent = navigator.userAgent.toLowerCase();
            if (userAgent.includes("android")) return "android";
            if (userAgent.includes("iphone") || userAgent.includes("ipad") || userAgent.includes("ipod")) return "ios";
            return "other";
        }

        /**
         * Naver App 실행 또는 설치 페이지로 이동
         */
        function redirectToNaverApp() {
            const os = detectOS();

            if (os === "android") {
                // Android: Intent Scheme 사용
                window.location.href = ANDROID_INTENT_SCHEME;

            } else if (os === "ios") {
                // iOS: URL Scheme 호출
                const clickedAt = +new Date();
                setTimeout(() => {
                    if (+new Date() - clickedAt < 2000) {
                        // App이 설치되지 않은 경우 App Store로 이동
                        window.location.href = NAVER_STORE_IOS;
                    }
                }, 1500);
                window.location.href = NAVER_SCHEME;

            } else {
                alert("현재 기기에서 이 기능은 지원되지 않습니다.");
            }
        }

        // 페이지 로드 시 자동 실행
        redirectToNaverApp();
    </script>
</body>
</html>
