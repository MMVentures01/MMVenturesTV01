<!DOCTYPE html>
<html>
<head>
    <title>跳转到Naver App</title>
</head>
<body>
    <button id="openNaver">打开 Naver APP</button>

    <script>
        document.getElementById("openNaver").addEventListener("click", function () {
            // 检测是否在KakaoTalk中打开
            const userAgent = navigator.userAgent.toLowerCase();
            const isKakaoTalk = userAgent.indexOf("kakaotalk") > -1;

            if (isKakaoTalk) {
                // 判断手机系统
                const isAndroid = userAgent.indexOf("android") > -1;
                const isIOS = /iPad|iPhone|iPod/.test(userAgent);

                if (isAndroid) {
                    // 安卓跳转 - 使用 Intent Scheme
                    window.location.href = "intent://default#Intent;scheme=naversearchapp;action=android.intent.action.VIEW;category=android.intent.category.BROWSABLE;package=com.nhn.android.search;end";
                    
                    // 方法 2: 使用 URI Scheme 作为备用
                    setTimeout(function () {
                        window.location.href = "naversearchapp://default?version=5";
                    }, 1000);
                } else if (isIOS) {
                    // iOS跳转 - 使用 URI Scheme
                    window.location.href = "naversearchapp://default?version=1";
                    
                    // 方法 2: 使用 App Store 链接作为最终备选方案
                    setTimeout(function () {
                        if (document.visibilityState !== 'hidden') {
                            window.location.href = "https://apps.apple.com/app/naver";
                        }
                    }, 2000);
                } else {
                    // 其他设备，跳转到App Store或Google Play
                    window.location.href = "https://apps.apple.com/app/naver"; // 替换为 Naver App 在 App Store 的链接
                }
            } else {
                alert("请在KakaoTalk中打开此链接");
            }
        });
    </script>
</body>
</html>

